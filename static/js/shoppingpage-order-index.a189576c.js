(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shoppingpage-order-index"],{2036:function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("3967")),o=new i.default([{key:"NORMAL",name:"进行中",value:10},{key:"CANCELLED",name:"已取消",value:20},{key:"APPLY_CANCEL",name:"待取消",value:21},{key:"COMPLETED",name:"已完成",value:30}]);t.default=o},"3a10":function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("3967")),o=new i.default([{key:"EXPRESS",name:"快递配送",value:10},{key:"EXTRACT",name:"上门自提",value:20},{key:"NOTHING",name:"无需配送",value:30}]);t.default=o},"40a9":function(e,t,a){"use strict";a("6a54");var n=a("3639").default,i=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bd06"),a("bf0f"),a("2797");var o=a("765c"),r=i(a("6b00")),s=i(a("eddd")),u=a("a379"),d=n(a("7cf1")),c=[{name:"全部",value:"all"},{name:"待支付",value:"payment"},{name:"待发货",value:"delivery"},{name:"待收货",value:"received"},{name:"待评价",value:"comment"}],l={components:{MescrollBody:r.default},mixins:[s.default],data:function(){return{DeliveryStatusEnum:o.DeliveryStatusEnum,DeliveryTypeEnum:o.DeliveryTypeEnum,OrderStatusEnum:o.OrderStatusEnum,PayStatusEnum:o.PayStatusEnum,ReceiptStatusEnum:o.ReceiptStatusEnum,options:{dataType:"all"},tabs:c,curTab:0,list:(0,u.getEmptyPaginateObj)(),upOption:{auto:!0,page:{size:15},noMoreSize:4,empty:{tip:"亲，暂无订单记录"}},canReset:!1,showQRCodePopup:!1,qrcodeImage:""}},onLoad:function(e){this.initCurTab(e)},onShow:function(){this.canReset&&this.onRefreshList()},methods:{initCurTab:function(e){if(e.dataType){var t=this.tabs.findIndex((function(t){return t.value==e.dataType}));this.curTab=t>-1?t:0}},upCallback:function(e){var t=this;t.getOrderList(e.num).then((function(e){var a=e.data.length,n=e.data.total;t.mescroll.endBySize(a,n)})).catch((function(){return t.mescroll.endErr()}))},getOrderList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this;return new Promise((function(a,n){d.list({dataType:t.getTabValue(),page:e},{load:!1}).then((function(n){var i=t.initList(n.data.list);t.list.data=(0,u.getMoreListData)(i,t.list,e),a(i)}))}))},initList:function(e){return e.data.forEach((function(e){e.total_num=0,e.goods.forEach((function(t){e.total_num+=t.total_num}))})),e},getTabValue:function(){return this.tabs[this.curTab].value},onChangeTab:function(e){this.curTab=e,this.onRefreshList()},onRefreshList:function(){var e=this;this.list=(0,u.getEmptyPaginateObj)(),setTimeout((function(){e.mescroll.resetUpScroll()}),120)},onCancel:function(e){var t=this;uni.showModal({title:"友情提示",content:"确认要取消该订单吗？",success:function(a){a.confirm&&d.cancel(e).then((function(e){t.$toast(e.message),t.onRefreshList()}))}})},onReceipt:function(e){var t=this;uni.showModal({title:"友情提示",content:"确认收到商品了吗？",success:function(a){a.confirm&&d.receipt(e).then((function(e){t.$success(e.message),t.onRefreshList()}))}})},onExtractQRCode:function(e){var t=this;d.extractQrcode(e,{channel:t.platform}).then((function(e){t.qrcodeImage=e.data.qrcode,t.showQRCodePopup=!0}))},onPay:function(e){this.$navTo("shoppingpage/checkout/cashier/index",{orderId:e})},handleTargetDetail:function(e){this.$navTo("shoppingpage/order/detail",{orderId:e.order_id,is_back:e.is_back})},handleTargetComment:function(e){this.$navTo("shoppingpage/order/comment/index",{orderId:e})}}};t.default=l},"4f49":function(e,t,a){"use strict";a.r(t);var n=a("6c0e"),i=a("93f2");for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);a("bb5b");var r=a("828b"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"13956cc3",null,!1,n["a"],void 0);t["default"]=s.exports},6331:function(e,t,a){var n=a("f60e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("967d").default;i("531fff02",n,!0,{sourceMap:!1,shadowMode:!1})},"6c0e":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n}));var n={uTabs:a("ff6c").default,uPopup:a("834a").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container",style:e.appThemeStyle},[a("mescroll-body",{ref:"mescrollRef",attrs:{sticky:!0,down:{native:!0},up:e.upOption},on:{init:function(t){arguments[0]=t=e.$handleEvent(t),e.mescrollInit.apply(void 0,arguments)},down:function(t){arguments[0]=t=e.$handleEvent(t),e.downCallback.apply(void 0,arguments)},up:function(t){arguments[0]=t=e.$handleEvent(t),e.upCallback.apply(void 0,arguments)}}},[a("u-tabs",{attrs:{list:e.tabs,"is-scroll":!1,current:e.curTab,"active-color":e.appTheme.mainBg,duration:.2},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onChangeTab.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"order-list"},e._l(e.list.data,(function(t,n){return a("v-uni-view",{key:n,staticClass:"order-item"},[a("v-uni-view",{staticClass:"item-top"},[a("v-uni-view",{staticClass:"item-top-left"},[a("v-uni-text",{staticClass:"order-time"},[e._v(e._s(t.create_time))])],1),a("v-uni-view",{staticClass:"item-top-right"},[a("v-uni-text",{staticClass:"state-text"},[e._v(e._s(t.state_text))])],1)],1),a("v-uni-view",{staticClass:"goods-list",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.handleTargetDetail(t)}}},e._l(t.goods,(function(t,n){return a("v-uni-view",{key:n,staticClass:"goods-item"},[a("v-uni-view",{staticClass:"goods-image"},[a("v-uni-image",{staticClass:"image",attrs:{src:t.goods_image,mode:"scaleToFill"}})],1),a("v-uni-view",{staticClass:"goods-content"},[a("v-uni-view",{staticClass:"goods-title"},[a("v-uni-text",{staticClass:"twoline-hide"},[e._v(e._s(t.goods_name))])],1),a("v-uni-view",{staticClass:"goods-props clearfix"},e._l(t.goods_props,(function(t,n){return a("v-uni-view",{key:n,staticClass:"goods-props-item"},[a("v-uni-text",[e._v(e._s(t.value.name))])],1)})),1)],1),a("v-uni-view",{staticClass:"goods-trade"},[a("v-uni-view",{staticClass:"goods-price"},[a("v-uni-text",{staticClass:"unit"},[e._v("￥")]),a("v-uni-text",{staticClass:"value"},[e._v(e._s(t.is_user_grade?t.grade_goods_price:t.goods_price))])],1),a("v-uni-view",{staticClass:"goods-num"},[a("v-uni-text",[e._v("×"+e._s(t.total_num))])],1)],1)],1)})),1),a("v-uni-view",{staticClass:"order-total"},[a("v-uni-text",[e._v("共"+e._s(t.total_num)+"件商品，总金额")]),a("v-uni-text",{staticClass:"unit"},[e._v("￥")]),a("v-uni-text",{staticClass:"money"},[e._v(e._s(t.pay_price))])],1),t.order_status!=e.OrderStatusEnum.CANCELLED.value?a("v-uni-view",{staticClass:"order-handle"},[a("v-uni-view",{staticClass:"btn-group clearfix"},[t.pay_status==e.PayStatusEnum.PENDING.value?[a("v-uni-view",{staticClass:"btn-item",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onCancel(t.order_id)}}},[e._v("取消")])]:e._e(),t.order_status!=e.OrderStatusEnum.APPLY_CANCEL.value?[t.pay_status==e.PayStatusEnum.SUCCESS.value&&t.delivery_status==e.DeliveryStatusEnum.NOT_DELIVERED.value?[t.is_back?e._e():a("v-uni-view",{staticClass:"btn-item",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onCancel(t.order_id)}}},[e._v("申请取消")])]:e._e(),t.pay_status==e.PayStatusEnum.SUCCESS.value&&t.delivery_type==e.DeliveryTypeEnum.EXTRACT.value&&t.delivery_status==e.DeliveryStatusEnum.NOT_DELIVERED.value?[a("v-uni-view",{staticClass:"btn-item active",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onExtractQRCode(t.order_id)}}},[a("v-uni-text",{staticClass:"iconfont icon-qr-extract"}),a("v-uni-text",{staticClass:"m-l-10"},[e._v("核销码")])],1)]:e._e()]:a("v-uni-view",{staticClass:"f-28 col-8"},[e._v("取消申请中")]),t.pay_status==e.PayStatusEnum.PENDING.value?[a("v-uni-view",{staticClass:"btn-item active",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onPay(t.order_id)}}},[e._v("去支付")])]:e._e(),t.delivery_status==e.DeliveryStatusEnum.DELIVERED.value&&t.receipt_status==e.ReceiptStatusEnum.NOT_RECEIVED.value?[a("v-uni-view",{staticClass:"btn-item active",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.onReceipt(t.order_id)}}},[e._v("确认收货")])]:e._e(),t.order_status==e.OrderStatusEnum.COMPLETED.value&&0==t.is_comment?[a("v-uni-view",{staticClass:"btn-item",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.handleTargetComment(t.order_id)}}},[e._v("评价")])]:e._e()],2)],1):e._e()],1)})),1)],1),a("u-popup",{attrs:{mode:"center","border-radius":"26",closeable:!0},model:{value:e.showQRCodePopup,callback:function(t){e.showQRCodePopup=t},expression:"showQRCodePopup"}},[a("v-uni-view",{staticClass:"qrcode-popup"},[a("v-uni-view",{staticClass:"title"},[e._v("自提核销二维码")]),a("v-uni-view",{staticClass:"pop-content"},[e.qrcodeImage?a("v-uni-image",{staticClass:"image",attrs:{src:e.qrcodeImage}}):e._e()],1)],1)],1)],1)},o=[]},"765c":function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DeliveryStatusEnum",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"DeliveryTypeEnum",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"OrderSourceEnum",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"OrderStatusEnum",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"OrderTypeEnum",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"PayStatusEnum",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"ReceiptStatusEnum",{enumerable:!0,get:function(){return d.default}});var i=n(a("8a78")),o=n(a("3a10")),r=n(a("f928")),s=n(a("2036")),u=n(a("ebc2")),d=n(a("8c78")),c=n(a("d0cf"))},"7cf1":function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.cancel=function(e,t){return o.default.post(r.cancel,(0,i.default)({orderId:e},t))},t.detail=function(e,t){return o.default.get(r.detail,(0,i.default)({orderId:e},t))},t.express=function(e,t){return o.default.get(r.express,(0,i.default)({orderId:e},t))},t.extractQrcode=function(e,t){return o.default.get(r.extractQrcode,(0,i.default)({orderId:e},t))},t.list=function(e,t){return o.default.get(r.list,e,t)},t.receipt=function(e,t){return o.default.post(r.receipt,(0,i.default)({orderId:e},t))},t.todoCounts=function(e,t){return o.default.get(r.todoCounts,e,t)};var i=n(a("9b1b")),o=n(a("d57d")),r={todoCounts:"order/todoCounts",list:"order/list",detail:"order/detail",express:"order/express",cancel:"order/cancel",extractQrcode:"order/extractQrcode",receipt:"order/receipt",pay:"order/pay"}},"8a78":function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("3967")),o=new i.default([{key:"NOT_DELIVERED",name:"未发货",value:10},{key:"DELIVERED",name:"已发货",value:20}]);t.default=o},"8c78":function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("3967")),o=new i.default([{key:"NOT_RECEIVED",name:"未收货",value:10},{key:"RECEIVED",name:"已收货",value:20}]);t.default=o},"93f2":function(e,t,a){"use strict";a.r(t);var n=a("40a9"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);t["default"]=i.a},bb5b:function(e,t,a){"use strict";var n=a("6331"),i=a.n(n);i.a},d0cf:function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("3967")),o=new i.default([{key:"PHYSICAL",name:"实物订单",value:10},{key:"VIRTUAL",name:"虚拟订单",value:20}]);t.default=o},ebc2:function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("3967")),o=new i.default([{key:"PENDING",name:"待支付",value:10},{key:"SUCCESS",name:"已支付",value:20}]);t.default=o},f60e:function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/* 引入uView全局scss变量文件 */\r\n/* 引入自定义主题 */.order-item[data-v-13956cc3]{margin:%?20?% auto %?20?% auto;padding:%?30?% %?30?%;width:94%;box-shadow:0 %?1?% %?5?% 0 rgba(0,0,0,.05);border-radius:%?16?%;background:#fff}.item-top[data-v-13956cc3]{display:flex;justify-content:space-between;font-size:%?26?%;margin-bottom:%?40?%}.item-top .order-time[data-v-13956cc3]{color:#777}.item-top .state-text[data-v-13956cc3]{color:var(--main-bg)}.goods-list .goods-item[data-v-13956cc3]{display:flex;margin-bottom:%?40?%}.goods-list .goods-item .goods-image[data-v-13956cc3]{width:%?180?%;height:%?180?%}.goods-list .goods-item .goods-image .image[data-v-13956cc3]{display:block;width:100%;height:100%;border-radius:%?8?%}.goods-list .goods-item .goods-content[data-v-13956cc3]{flex:1;padding-left:%?16?%;padding-top:%?16?%}.goods-list .goods-item .goods-content .goods-title[data-v-13956cc3]{font-size:%?26?%;max-height:%?76?%}.goods-list .goods-item .goods-content .goods-props[data-v-13956cc3]{margin-top:%?14?%;height:%?40?%;color:#ababab;font-size:%?24?%;overflow:hidden}.goods-list .goods-item .goods-content .goods-props .goods-props-item[data-v-13956cc3]{display:inline-block;margin-right:%?14?%;padding:%?4?% %?16?%;border-radius:%?12?%;background-color:#f5f5f5;width:auto}.goods-list .goods-item .goods-trade[data-v-13956cc3]{padding-top:%?16?%;width:%?150?%;text-align:right;color:#999;font-size:%?26?%}.goods-list .goods-item .goods-trade .goods-price[data-v-13956cc3]{vertical-align:bottom;margin-bottom:%?16?%}.goods-list .goods-item .goods-trade .goods-price .unit[data-v-13956cc3]{margin-right:%?-2?%;font-size:%?24?%}.order-total[data-v-13956cc3]{font-size:%?26?%;vertical-align:bottom;text-align:right;height:%?40?%;margin-bottom:%?30?%}.order-total .unit[data-v-13956cc3]{margin-left:%?8?%;margin-right:%?-2?%;font-size:%?26?%}.order-total .money[data-v-13956cc3]{font-size:%?28?%}.order-handle .btn-group .btn-item[data-v-13956cc3]{border-radius:%?10?%;padding:%?6?% %?20?%;margin-left:%?15?%;font-size:%?28?%;float:right;color:#383838;border:%?1?% solid #a8a8a8}.order-handle .btn-group .btn-item[data-v-13956cc3]:last-child{margin-left:0}.order-handle .btn-group .btn-item.active[data-v-13956cc3]{color:var(--main-bg);border:%?1?% solid var(--main-bg)}.qrcode-popup[data-v-13956cc3]{padding:%?36?% %?30?%}.qrcode-popup .title[data-v-13956cc3]{font-size:%?30?%;margin-bottom:%?26?%;font-weight:700;text-align:center}.qrcode-popup .pop-content[data-v-13956cc3]{min-height:%?260?%;padding:0 %?10?%}.qrcode-popup .pop-content .image[data-v-13956cc3]{display:block;width:%?510?%;height:%?510?%}',""]),e.exports=t},f928:function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("3967")),o=new i.default([{key:"MASTER",name:"普通订单",value:10},{key:"BARGAIN",name:"砍价订单",value:20},{key:"SHARP",name:"秒杀订单",value:30}]);t.default=o}}]);